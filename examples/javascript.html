

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JavaScript / WebAssembly &mdash; SCS 3.2.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/scs_theme.css?v=7d28eb0c" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=84e44b8a"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing" href="../contributing/index.html" />
    <link rel="prev" title="Ruby" href="ruby.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/scs_logo_transparent.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../algorithm/index.html">Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linear_solver/index.html">Linear System Solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blas_lapack/index.html">BLAS and LAPACK</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="c.html">C/C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab.html">MATLAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="julia.html">Julia</a></li>
<li class="toctree-l2"><a class="reference internal" href="r.html">R</a></li>
<li class="toctree-l2"><a class="reference internal" href="ruby.html">Ruby</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">JavaScript / WebAssembly</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#live-demo">Live Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entropy-example">Entropy Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing/index.html">Citing SCS</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SCS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Examples</a></li>
      <li class="breadcrumb-item active">JavaScript / WebAssembly</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/javascript.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="javascript-webassembly">
<span id="javascript-example"></span><h1>JavaScript / WebAssembly<a class="headerlink" href="#javascript-webassembly" title="Link to this heading"></a></h1>
<p>These examples assume that you have loaded <cite>scs.js</cite>, either in Node.js via</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">createSCS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;scs-solver&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// if using CommonJS</span>
<span class="k">import</span><span class="w"> </span><span class="nx">createSCS</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;scs-solver&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// if using ES6 modules</span>
</pre></div>
</div>
<p>or in the browser via a script tag or an ES6 module import (see <a class="reference internal" href="../install/javascript.html#javascript-install"><span class="std std-ref">the
install page</span></a>).</p>
<section id="live-demo">
<h2>Live Demo<a class="headerlink" href="#live-demo" title="Link to this heading"></a></h2>
<p>Here is a live demo, which computes the point <span class="math notranslate nohighlight">\(x\)</span> that is closest to the
origin, subject to lying in the half-plane <span class="math notranslate nohighlight">\(x_1 + x_2 \ge b\)</span> and within
a disc of radius <span class="math notranslate nohighlight">\(r\)</span> centered at <span class="math notranslate nohighlight">\(c = (-2, 2.5)\)</span>. Here, the values
of <span class="math notranslate nohighlight">\(b\)</span> and <span class="math notranslate nohighlight">\(r\)</span> are set by sliders. The solution is computed using
two second-order cones, one for the disc constraint, and one to encode
<span class="math notranslate nohighlight">\(\|x\|_2 \leq d\)</span>, where <span class="math notranslate nohighlight">\(d\)</span> is the distance from the origin, which
is the quantity to be minimized.</p>
<script src="https://unpkg.com/scs-solver/dist/scs.js"></script>
<style>
    #solution {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    #canvas {
        border: 1px solid #ccc;
        max-width: 100%;
    }

    #canvas text {
        font-style: italic;
    }

    pre#output {
        font-size: 75%;
        margin: 0;
        max-width: 180px;
        overflow-x: auto;
    }
</style>
<div>
    <label for="radiusSlider">Radius (<i>r</i>):</label>
    <input type="range" id="radiusSlider" min="0.5" max="6" step="0.1" value="5">
    <span id="radiusVal">5</span>
</div>
<div>
    <label for="lineSlider">Line Offset (<i>b</i>):</label>
    <input type="range" id="lineSlider" min="-3" max="8" step="0.1" value="3">
    <span id="lineVal">3</span>
</div>
<div id="solution">
    <svg id="canvas" width="500" height="500"></svg>
    <pre id="output">Loading...</pre>
</div>
<script>
    (async function () {
        const SCS = await createSCS();

        const svg = document.getElementById('canvas');
        const output = document.getElementById('output');

        let r = parseFloat(document.getElementById('radiusSlider').value);
        let b_val = parseFloat(document.getElementById('lineSlider').value);
        const c = [-2, 2.5];      // Center of circle
        const a = [1, 1];         // Coefficients for linear constraint
        let solutionPoint = [0, 0];

        document.getElementById('radiusSlider').addEventListener('input', e => {
            r = parseFloat(e.target.value);
            document.getElementById('radiusVal').textContent = r;
            solveAndDraw();
        });

        document.getElementById('lineSlider').addEventListener('input', e => {
            b_val = parseFloat(e.target.value);
            document.getElementById('lineVal').textContent = b_val;
            solveAndDraw();
        });

        async function solveAndDraw() {
            // Dimensions
            const m = 7; // total constraint rows: 1 for line and 3+3 for SOC
            const n = 3; // variables: x1, x2, d

            // Way to construct the problem using math.js:

            // // Create a sparse matrix A of size m x n using math.js
            // let A = math.sparse(math.zeros(m, n));
            // let b = Array(m).fill(0);

            // // Indices for rows in constraints:
            // // Linear constraint: 0, SOC1: 1, 2, 3, SOC2: 4, 5, 6

            // // Linear constraint: a^T x >= b_val -> -x1 + -x2 + slack == -b_val
            // A.set([0, 0], -a[0]);
            // A.set([0, 1], -a[1]);
            // b[0] = -b_val;

            // // Constraint SOC1: ||[x1,x2]||_2 <= d -> (d, x1, x2) ∈ SOC
            // A.set([1, 2], -1);   // coefficient for d in row0
            // A.set([2, 0], 1);    // coefficient for x1 in row1
            // A.set([3, 1], 1);    // coefficient for x2 in row2
            // // No additional b entries needed (remains 0)

            // // Constraint SOC2: ||[x1 - c1, x2 - c2]||_2 <= r -> (r, x1-c1, x2-c2) ∈ SOC
            // b[4] = r;              // row3: constant term = r
            // A.set([5, 0], 1);      // row4: coefficient for x1
            // b[5] = c[0];           // adjust for x1 - c1
            // A.set([6, 1], 1);      // row5: coefficient for x2
            // b[6] = c[1];           // adjust for x2 - c2

            // // Extract CSC arrays from math.js sparse matrix
            // const A_data = A._values;
            // const A_index = A._index;
            // const A_ptr = A._ptr;

            // Directly construct the problem using arrays:

            // Objective: minimize t
            const c_vec = [0, 0, 1];

            const A_index = [5, 2, 0, 6, 3, 0, 1];
            const A_ptr = [0, 3, 6, 7];
            const A_data = [1, 1, -1, 1, 1, -1, -1];

            const b = [-b_val, 0, 0, 0, r, c[0], c[1]];
            
            const data = {
                m: m,
                n: n,
                A_x: A_data,
                A_i: A_index,
                A_p: A_ptr,
                b: b,
                c: c_vec
            };

            console.log(data);

            // Cone specification: one linear inequality, two SOC cones of size 3 each
            const cone = {
                l: 1,
                q: [3, 3],
                qsize: 2,
            };

            const settings = new SCS.ScsSettings();
            SCS.setDefaultSettings(settings);
            settings.epsAbs = 1e-6;
            settings.epsRel = 1e-6;
            settings.verbose = 0;

            const solution = SCS.solve(data, cone, settings);

            for (const key in solution.info) {
                if (typeof solution.info[key] === 'number') {
                    solution.info[key] = Math.round(solution.info[key] * 10000) / 10000;
                }
            }

            if (solution.status == "SOLVED") {
                const x_sol = solution.x.map(x => Math.round(x * 1000) / 1000);
                solutionPoint = [x_sol[0], x_sol[1]];

                let text = JSON.stringify({
                    status: solution.status,
                    x: x_sol,
                    info: solution.info
                }, null, 2).split('\n');
                text[3] = text[3].padEnd(12) + "// x1";
                text[4] = text[4].padEnd(12) + "// x2";
                text[5] = text[5].padEnd(12) + "// d";
                output.textContent = text.join('\n');
                console.log(text.join('\n'));
            } else if (solution.status == "INFEASIBLE") {
                solutionPoint = null;
                output.textContent = JSON.stringify({
                    status: solution.status,
                    info: solution.info
                }, null, 2);
            } else {
                output.textContent = JSON.stringify({
                    status: solution.status,
                    info: solution.info
                }, null, 2);
            }

            drawScene();
        }

        function drawScene() {
            // Clear existing SVG content
            while (svg.firstChild) {
                svg.removeChild(svg.firstChild);
            }

            // Coordinate transformation
            function toSVGCoords(x, y) {
                const scale = 500 / 20;
                const cx = 250 + x * scale;
                const cy = 250 - y * scale;
                return [cx, cy];
            }

            // Draw circle
            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            const [c_svgX, c_svgY] = toSVGCoords(c[0], c[1]);
            circle.setAttribute("cx", c_svgX);
            circle.setAttribute("cy", c_svgY);
            circle.setAttribute("r", r * (500 / 20));
            circle.setAttribute("stroke", "blue");
            circle.setAttribute("fill", "rgba(0, 0, 255, 0.05)");
            svg.appendChild(circle);

            // Draw point c
            const cCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            cCircle.setAttribute("cx", c_svgX);
            cCircle.setAttribute("cy", c_svgY);
            cCircle.setAttribute("r", 2);
            cCircle.setAttribute("fill", "blue");
            svg.appendChild(cCircle);

            if (r >= 1.5) {
                // label
                const cText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                cText.setAttribute("x", c_svgX + 3);
                cText.setAttribute("y", c_svgY - 3);
                cText.textContent = "c";
                svg.appendChild(cText);

                // Radius line
                const radiusLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
                const rEnd = toSVGCoords(c[0] - r / Math.sqrt(2), c[1] - r / Math.sqrt(2));
                radiusLine.setAttribute("x1", c_svgX);
                radiusLine.setAttribute("y1", c_svgY);
                radiusLine.setAttribute("x2", rEnd[0]);
                radiusLine.setAttribute("y2", rEnd[1]);
                radiusLine.setAttribute("stroke", "blue");
                svg.appendChild(radiusLine);
                // label
                const rText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                const radiusLabelPos = toSVGCoords(c[0] - r / Math.sqrt(2) * 0.5 - 0.2, c[1] - r / Math.sqrt(2) * 0.5 + 0.2);
                rText.setAttribute("x", radiusLabelPos[0]);
                rText.setAttribute("y", radiusLabelPos[1]);
                rText.textContent = "r";
                radiusLine.setAttribute("stroke-dasharray", "5,2");
                svg.appendChild(rText);
            }

            // Draw line
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            const pt1 = toSVGCoords(-10, b_val + 10);
            const pt2 = toSVGCoords(10, b_val - 10);
            line.setAttribute("x1", pt1[0]);
            line.setAttribute("y1", pt1[1]);
            line.setAttribute("x2", pt2[0]);
            line.setAttribute("y2", pt2[1]);
            line.setAttribute("stroke", "green");
            svg.appendChild(line);

            // Shade area above the line
            const polygon = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            polygon.setAttribute("points", `${pt1[0]},${pt1[1]} ${pt2[0]},${pt2[1]} ${pt2[0]},-500 ${pt1[0]},-500`);
            polygon.setAttribute("fill", "rgba(0, 255, 0, 0.05)");
            svg.appendChild(polygon);

            // label offset b
            const bText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            const bTextPos = toSVGCoords(0, b_val);
            bText.setAttribute("x", bTextPos[0] - 17);
            bText.setAttribute("y", bTextPos[1] + 5);
            bText.textContent = "b";
            svg.appendChild(bText);
            // tick
            const bTick = document.createElementNS("http://www.w3.org/2000/svg", "line");
            bTick.setAttribute("x1", bTextPos[0] - 3);
            bTick.setAttribute("y1", bTextPos[1]);
            bTick.setAttribute("x2", bTextPos[0] + 3);
            bTick.setAttribute("y2", bTextPos[1]);
            bTick.setAttribute("stroke", "black");
            svg.appendChild(bTick);

            // Draw axes
            const axisX = document.createElementNS("http://www.w3.org/2000/svg", "line");
            axisX.setAttribute("x1", 0);
            axisX.setAttribute("y1", 250);
            axisX.setAttribute("x2", 500);
            axisX.setAttribute("y2", 250);
            axisX.setAttribute("stroke", "black");
            svg.appendChild(axisX);

            const axisY = document.createElementNS("http://www.w3.org/2000/svg", "line");
            axisY.setAttribute("x1", 250);
            axisY.setAttribute("y1", 0);
            axisY.setAttribute("x2", 250);
            axisY.setAttribute("y2", 500);
            axisY.setAttribute("stroke", "black");
            svg.appendChild(axisY);

            // Draw optimal point or infeasibility message
            if (solutionPoint) {
                const [optX, optY] = toSVGCoords(solutionPoint[0], solutionPoint[1]);
                const optCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                optCircle.setAttribute("cx", optX);
                optCircle.setAttribute("cy", optY);
                optCircle.setAttribute("r", 4);
                optCircle.setAttribute("fill", "red");
                svg.appendChild(optCircle);

                // label
                const optText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                optText.setAttribute("x", optX + 5);
                optText.setAttribute("y", optY - 5);
                optText.textContent = "x";
                svg.appendChild(optText);

            } else {
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("x", 400);
                text.setAttribute("y", 100);
                text.setAttribute("text-anchor", "middle");
                text.setAttribute("dominant-baseline", "middle");
                text.textContent = "Infeasible";
                svg.appendChild(text);
            }
        }

        // Initial solve and draw
        solveAndDraw();
    })();
</script><details style="margin: 1em 0;">
  <summary style="cursor: pointer; margin-bottom: 1em;">Show code</summary><div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://unpkg.com/scs-solver/dist/scs.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">#</span><span class="nn">solution</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">        </span><span class="k">flex-wrap</span><span class="p">:</span><span class="w"> </span><span class="kc">wrap</span><span class="p">;</span>
<span class="w">        </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">        </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">canvas</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#ccc</span><span class="p">;</span>
<span class="w">        </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">canvas</span><span class="w"> </span><span class="nt">text</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">font-style</span><span class="p">:</span><span class="w"> </span><span class="kc">italic</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nt">pre</span><span class="p">#</span><span class="nn">output</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="kt">%</span><span class="p">;</span>
<span class="w">        </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">overflow-x</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;radiusSlider&quot;</span><span class="p">&gt;</span>Radius (<span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>r<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>):<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;range&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;radiusSlider&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;0.5&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;6&quot;</span> <span class="na">step</span><span class="o">=</span><span class="s">&quot;0.1&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;radiusVal&quot;</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;lineSlider&quot;</span><span class="p">&gt;</span>Line Offset (<span class="p">&lt;</span><span class="nt">i</span><span class="p">&gt;</span>b<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>):<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;range&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;lineSlider&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;-3&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;8&quot;</span> <span class="na">step</span><span class="o">=</span><span class="s">&quot;0.1&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;lineVal&quot;</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;solution&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;canvas&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;500&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;500&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">&gt;</span>Loading...<span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">SCS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">createSCS</span><span class="p">();</span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">svg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;radiusSlider&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">b_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;lineSlider&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">];</span><span class="w">      </span><span class="c1">// Center of circle</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span><span class="w">         </span><span class="c1">// Coefficients for linear constraint</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">solutionPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">];</span>

<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;radiusSlider&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;radiusVal&#39;</span><span class="p">).</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">r</span><span class="p">;</span>
<span class="w">            </span><span class="nx">solveAndDraw</span><span class="p">();</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;lineSlider&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">b_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;lineVal&#39;</span><span class="p">).</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b_val</span><span class="p">;</span>
<span class="w">            </span><span class="nx">solveAndDraw</span><span class="p">();</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">solveAndDraw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Dimensions</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">7</span><span class="p">;</span><span class="w"> </span><span class="c1">// total constraint rows: 1 for line and 3+3 for SOC</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w"> </span><span class="c1">// variables: x1, x2, d</span>

<span class="w">            </span><span class="c1">// Way to construct the problem using math.js:</span>

<span class="w">            </span><span class="c1">// // Create a sparse matrix A of size m x n using math.js</span>
<span class="w">            </span><span class="c1">// let A = math.sparse(math.zeros(m, n));</span>
<span class="w">            </span><span class="c1">// let b = Array(m).fill(0);</span>

<span class="w">            </span><span class="c1">// // Indices for rows in constraints:</span>
<span class="w">            </span><span class="c1">// // Linear constraint: 0, SOC1: 1, 2, 3, SOC2: 4, 5, 6</span>

<span class="w">            </span><span class="c1">// // Linear constraint: a^T x &gt;= b_val -&gt; -x1 + -x2 + slack == -b_val</span>
<span class="w">            </span><span class="c1">// A.set([0, 0], -a[0]);</span>
<span class="w">            </span><span class="c1">// A.set([0, 1], -a[1]);</span>
<span class="w">            </span><span class="c1">// b[0] = -b_val;</span>

<span class="w">            </span><span class="c1">// // Constraint SOC1: ||[x1,x2]||_2 &lt;= d -&gt; (d, x1, x2) ∈ SOC</span>
<span class="w">            </span><span class="c1">// A.set([1, 2], -1);   // coefficient for d in row0</span>
<span class="w">            </span><span class="c1">// A.set([2, 0], 1);    // coefficient for x1 in row1</span>
<span class="w">            </span><span class="c1">// A.set([3, 1], 1);    // coefficient for x2 in row2</span>
<span class="w">            </span><span class="c1">// // No additional b entries needed (remains 0)</span>

<span class="w">            </span><span class="c1">// // Constraint SOC2: ||[x1 - c1, x2 - c2]||_2 &lt;= r -&gt; (r, x1-c1, x2-c2) ∈ SOC</span>
<span class="w">            </span><span class="c1">// b[4] = r;              // row3: constant term = r</span>
<span class="w">            </span><span class="c1">// A.set([5, 0], 1);      // row4: coefficient for x1</span>
<span class="w">            </span><span class="c1">// b[5] = c[0];           // adjust for x1 - c1</span>
<span class="w">            </span><span class="c1">// A.set([6, 1], 1);      // row5: coefficient for x2</span>
<span class="w">            </span><span class="c1">// b[6] = c[1];           // adjust for x2 - c2</span>

<span class="w">            </span><span class="c1">// // Extract CSC arrays from math.js sparse matrix</span>
<span class="w">            </span><span class="c1">// const A_data = A._values;</span>
<span class="w">            </span><span class="c1">// const A_index = A._index;</span>
<span class="w">            </span><span class="c1">// const A_ptr = A._ptr;</span>

<span class="w">            </span><span class="c1">// Directly construct the problem using arrays:</span>

<span class="w">            </span><span class="c1">// Objective: minimize t</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">c_vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>

<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">A_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">A_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">];</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">A_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">];</span>

<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="nx">b_val</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">c</span><span class="p">[</span><span class="mf">1</span><span class="p">]];</span>
<span class="w">            </span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">m</span><span class="o">:</span><span class="w"> </span><span class="nx">m</span><span class="p">,</span>
<span class="w">                </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="nx">n</span><span class="p">,</span>
<span class="w">                </span><span class="nx">A_x</span><span class="o">:</span><span class="w"> </span><span class="nx">A_data</span><span class="p">,</span>
<span class="w">                </span><span class="nx">A_i</span><span class="o">:</span><span class="w"> </span><span class="nx">A_index</span><span class="p">,</span>
<span class="w">                </span><span class="nx">A_p</span><span class="o">:</span><span class="w"> </span><span class="nx">A_ptr</span><span class="p">,</span>
<span class="w">                </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span>
<span class="w">                </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="nx">c_vec</span>
<span class="w">            </span><span class="p">};</span>

<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Cone specification: one linear inequality, two SOC cones of size 3 each</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">cone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">l</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">                </span><span class="nx">q</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">],</span>
<span class="w">                </span><span class="nx">qsize</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">            </span><span class="p">};</span>

<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">ScsSettings</span><span class="p">();</span>
<span class="w">            </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">setDefaultSettings</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="w">            </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsAbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">;</span>
<span class="w">            </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsRel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">;</span>
<span class="w">            </span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">solution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">solve</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">cone</span><span class="p">,</span><span class="w"> </span><span class="nx">settings</span><span class="p">);</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">10000</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">10000</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">solution</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;SOLVED&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">x_sol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="w">                </span><span class="nx">solutionPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">x_sol</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">x_sol</span><span class="p">[</span><span class="mf">1</span><span class="p">]];</span>

<span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">x_sol</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span>
<span class="w">                </span><span class="p">},</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">[</span><span class="mf">3</span><span class="p">].</span><span class="nx">padEnd</span><span class="p">(</span><span class="mf">12</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;// x1&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">text</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">[</span><span class="mf">4</span><span class="p">].</span><span class="nx">padEnd</span><span class="p">(</span><span class="mf">12</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;// x2&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">text</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">[</span><span class="mf">5</span><span class="p">].</span><span class="nx">padEnd</span><span class="p">(</span><span class="mf">12</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;// d&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">solution</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;INFEASIBLE&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">solutionPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">                </span><span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span>
<span class="w">                </span><span class="p">},</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">output</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">                    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">info</span>
<span class="w">                </span><span class="p">},</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="nx">drawScene</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">drawScene</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Clear existing SVG content</span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">svg</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">svg</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Coordinate transformation</span>
<span class="w">            </span><span class="kd">function</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">500</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">20</span><span class="p">;</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">cx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">250</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">scale</span><span class="p">;</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">cy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">250</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">scale</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">cx</span><span class="p">,</span><span class="w"> </span><span class="nx">cy</span><span class="p">];</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Draw circle</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;circle&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">c_svgX</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgY</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">c</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">circle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgX</span><span class="p">);</span>
<span class="w">            </span><span class="nx">circle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgY</span><span class="p">);</span>
<span class="w">            </span><span class="nx">circle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">500</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">20</span><span class="p">));</span>
<span class="w">            </span><span class="nx">circle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;blue&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">circle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rgba(0, 0, 255, 0.05)&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Draw point c</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">cCircle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;circle&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">cCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgX</span><span class="p">);</span>
<span class="w">            </span><span class="nx">cCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgY</span><span class="p">);</span>
<span class="w">            </span><span class="nx">cCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">            </span><span class="nx">cCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;blue&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">cCircle</span><span class="p">);</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">1.5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// label</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">cText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">cText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="w">                </span><span class="nx">cText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgY</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="w">                </span><span class="nx">cText</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">cText</span><span class="p">);</span>

<span class="w">                </span><span class="c1">// Radius line</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">radiusLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">rEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="w"> </span><span class="nx">c</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">));</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgX</span><span class="p">);</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">c_svgY</span><span class="p">);</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">rEnd</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">rEnd</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;blue&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">radiusLine</span><span class="p">);</span>
<span class="w">                </span><span class="c1">// label</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">rText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">radiusLabelPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.2</span><span class="p">);</span>
<span class="w">                </span><span class="nx">rText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">radiusLabelPos</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
<span class="w">                </span><span class="nx">rText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">radiusLabelPos</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">                </span><span class="nx">rText</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;r&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">radiusLine</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;5,2&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">rText</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Draw line</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">pt1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="o">-</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">b_val</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">pt2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">b_val</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
<span class="w">            </span><span class="nx">line</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pt1</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">line</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pt1</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">line</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pt2</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">line</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pt2</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">line</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;green&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Shade area above the line</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">polygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;polygon&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">polygon</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;points&quot;</span><span class="p">,</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">pt1</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">,</span><span class="si">${</span><span class="nx">pt1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">pt2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">,</span><span class="si">${</span><span class="nx">pt2</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">pt2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">,-500 </span><span class="si">${</span><span class="nx">pt1</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">,-500`</span><span class="p">);</span>
<span class="w">            </span><span class="nx">polygon</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rgba(0, 255, 0, 0.05)&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">polygon</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// label offset b</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">bText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">bTextPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">b_val</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">17</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bText</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">;</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">bText</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// tick</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">bTick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bTick</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bTick</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">bTick</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="w">            </span><span class="nx">bTick</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bTextPos</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">            </span><span class="nx">bTick</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;black&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">bTick</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Draw axes</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">axisX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisX</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisX</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisX</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">500</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisX</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisX</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;black&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">axisX</span><span class="p">);</span>

<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">axisY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisY</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisY</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisY</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisY</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">500</span><span class="p">);</span>
<span class="w">            </span><span class="nx">axisY</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;black&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">axisY</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Draw optimal point or infeasibility message</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">solutionPoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">optX</span><span class="p">,</span><span class="w"> </span><span class="nx">optY</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">toSVGCoords</span><span class="p">(</span><span class="nx">solutionPoint</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="w"> </span><span class="nx">solutionPoint</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">optCircle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;circle&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">optX</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">optY</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optCircle</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">optCircle</span><span class="p">);</span>

<span class="w">                </span><span class="c1">// label</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">optText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">optX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optText</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">optY</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
<span class="w">                </span><span class="nx">optText</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">optText</span><span class="p">);</span>

<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">400</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;middle&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;dominant-baseline&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;middle&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="nx">text</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Infeasible&quot;</span><span class="p">;</span>
<span class="w">                </span><span class="nx">svg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Initial solve and draw</span>
<span class="w">        </span><span class="nx">solveAndDraw</span><span class="p">();</span>
<span class="w">    </span><span class="p">})();</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</details></section>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<p>Here’s the <a class="reference internal" href="c.html#c-example"><span class="std std-ref">basic example from C</span></a> translated to JavaScript:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">createSCS</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">SCS</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">m</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">        </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">        </span><span class="nx">A_x</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">],</span>
<span class="w">        </span><span class="nx">A_i</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
<span class="w">        </span><span class="nx">A_p</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">],</span>
<span class="w">        </span><span class="nx">P_x</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">],</span>
<span class="w">        </span><span class="nx">P_i</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">],</span>
<span class="w">        </span><span class="nx">P_p</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">],</span>
<span class="w">        </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.5</span><span class="p">],</span>
<span class="w">        </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="p">]</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">cone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">z</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">        </span><span class="nx">l</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">ScsSettings</span><span class="p">();</span>
<span class="w">    </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">setDefaultSettings</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="w">    </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsAbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-9</span><span class="p">;</span>
<span class="w">    </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsRel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-9</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">solution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">solve</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">cone</span><span class="p">,</span><span class="w"> </span><span class="nx">settings</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">solution</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// re-solve using warm start (will be faster)</span>
<span class="w">    </span><span class="nx">settings</span><span class="p">.</span><span class="nx">warmStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">solution2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">solve</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">cone</span><span class="p">,</span><span class="w"> </span><span class="nx">settings</span><span class="p">,</span><span class="w"> </span><span class="nx">solution</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This prints the solution object to the console:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">0.3000000000043908</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.6999999999956144</span><span class="w"> </span><span class="p">],</span>
<span class="w">  </span><span class="nx">y</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">2.699999999995767</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0999999999869825</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">],</span>
<span class="w">  </span><span class="nx">s</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1999999999956145</span><span class="w"> </span><span class="p">],</span>
<span class="w">  </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">iter</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;solved&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">linSysSolver</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sparse-direct-amd-qdldl&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">statusVal</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">scaleUpdates</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pobj</span><span class="o">:</span><span class="w"> </span><span class="mf">1.2349999999907928</span><span class="p">,</span>
<span class="w">    </span><span class="nx">dobj</span><span class="o">:</span><span class="w"> </span><span class="mf">1.2350000000001042</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resPri</span><span class="o">:</span><span class="w"> </span><span class="mf">4.390808429506794e-12</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resDual</span><span class="o">:</span><span class="w"> </span><span class="mf">1.4869081633461182e-13</span><span class="p">,</span>
<span class="w">    </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="mf">9.311465734712679e-12</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resInfeas</span><span class="o">:</span><span class="w"> </span><span class="mf">1.3043478260851176</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resUnbddA</span><span class="o">:</span><span class="w"> </span><span class="kc">NaN</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resUnbddP</span><span class="o">:</span><span class="w"> </span><span class="kc">NaN</span><span class="p">,</span>
<span class="w">    </span><span class="nx">compSlack</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">setupTime</span><span class="o">:</span><span class="w"> </span><span class="mf">2.796667</span><span class="p">,</span>
<span class="w">    </span><span class="nx">solveTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0.505584</span><span class="p">,</span>
<span class="w">    </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">rejectedAccelSteps</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">acceptedAccelSteps</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">linSysTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0.047704000000000024</span><span class="p">,</span>
<span class="w">    </span><span class="nx">coneTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0.07804600000000002</span><span class="p">,</span>
<span class="w">    </span><span class="nx">accelTime</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">statusVal</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;SOLVED&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="entropy-example">
<h2>Entropy Example<a class="headerlink" href="#entropy-example" title="Link to this heading"></a></h2>
<p>Next, we will consider a problem involving maximum entropy. Given a vector
<span class="math notranslate nohighlight">\(y \in \mathbf{R}^n\)</span>, we want to optimize a function involving entropy
over the unit simplex.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
        \text{minimize} \quad &amp; \sum_{i = 1}^n x_i \log x_i - \langle y, x \rangle \\
  \text{subject to} \quad &amp; \sum_{i = 1}^n x_i = 1 \\
  &amp; x \geq 0
\end{align*}\end{split}\]</div>
<p>It is known that for the optimal solution, we have <span class="math notranslate nohighlight">\(x_i \propto e^{y_i}\)</span>.</p>
<p>This problem can be formulated using the <a class="reference internal" href="../api/cones.html#cones"><span class="std std-ref">(primal) exponential cone</span></a>,
defined as</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
  \mathcal{K}_{\text{exp}} &amp;= \{ (x,y,z) \in \mathbf{R}^3 \mid y e^{x/y} \leq z, y&gt;0  \} \\
  &amp;= \{ (x,y,z) \in \mathbf{R}^3 \mid y \log(z/y) \geq x, y&gt;0, z&gt;0 \}
\end{align*}\end{split}\]</div>
<p>Our formulation is then:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
  \text{minimize} \quad &amp; \sum_{i = 1}^n t_i - \langle y, x \rangle \\
  \text{subject to} \quad &amp; \sum_{i = 1}^n x_i = 1 \\
  &amp; x_i \geq 0 \: &amp;&amp; \forall i \\
  &amp; (-t_i, x_i, 1) \in \mathcal{K}_{\text{exp}} \: &amp;&amp; \forall i
\end{align*}\end{split}\]</div>
<p>To implement this problem in JavaScript, we will use the sparse matrix
implementation from the <a class="reference external" href="https://mathjs.org/docs/reference/classes/sparsematrix.html">Math.js library</a>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">createSCS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./out/scs.js&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">math</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./math.js&#39;</span><span class="p">);</span>

<span class="nx">createSCS</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">SCS</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">({</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">());</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">math</span><span class="p">.</span><span class="nx">matrix</span><span class="p">(</span><span class="s1">&#39;sparse&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">constraintIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">x_vars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">({</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">t_vars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">({</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">n</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// equality constraint (zero cone)</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">numEqCones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">A</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">constraintIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">x_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="nx">constraintIndex</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="nx">numEqCones</span><span class="o">++</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// inequality constraints (positive cone)</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">numPosCones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">A</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">constraintIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">x_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">constraintIndex</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="nx">numPosCones</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// exponential cone constraints</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">numExpCones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// (-t_i, x_i, 1) in exponential cone</span>
<span class="w">        </span><span class="nx">A</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">constraintIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">t_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">constraintIndex</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="nx">A</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">constraintIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">x_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">constraintIndex</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// last element is constant, so A has a 0-row; set arbitrary index to 0</span>
<span class="w">        </span><span class="nx">A</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">constraintIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">x_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">        </span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="nx">constraintIndex</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="nx">numExpCones</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// objective function</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">({</span><span class="w"> </span><span class="nx">length</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">c</span><span class="p">[</span><span class="nx">x_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="w">        </span><span class="nx">c</span><span class="p">[</span><span class="nx">t_vars</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">m</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">_size</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span>
<span class="w">        </span><span class="nx">n</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">_size</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span>
<span class="w">        </span><span class="nx">A_x</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">_values</span><span class="p">,</span>
<span class="w">        </span><span class="nx">A_i</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">_index</span><span class="p">,</span>
<span class="w">        </span><span class="nx">A_p</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">_ptr</span><span class="p">,</span>
<span class="w">        </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span>
<span class="w">        </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">cone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">z</span><span class="o">:</span><span class="w"> </span><span class="nx">numEqCones</span><span class="p">,</span>
<span class="w">        </span><span class="nx">l</span><span class="o">:</span><span class="w"> </span><span class="nx">numPosCones</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ep</span><span class="o">:</span><span class="w"> </span><span class="nx">numExpCones</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">ScsSettings</span><span class="p">();</span>
<span class="w">    </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">setDefaultSettings</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="w">    </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsAbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-9</span><span class="p">;</span>
<span class="w">    </span><span class="nx">settings</span><span class="p">.</span><span class="nx">epsRel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-9</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">solution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">SCS</span><span class="p">.</span><span class="nx">solve</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">cone</span><span class="p">,</span><span class="w"> </span><span class="nx">settings</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;SCS solution:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">solution</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">));</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">denominator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">y_i</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">y_i</span><span class="p">)).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">predicted_solution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">y_i</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">y_i</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">denominator</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Predicted solution:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">predicted_solution</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ruby.html" class="btn btn-neutral float-left" title="Ruby" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../contributing/index.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Brendan O&#39;Donoghue.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9CY7R8S5N2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9CY7R8S5N2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>